name: OpenDXA - Open Source Dislocation Extraction Algorithm
version: 1.0.0

artifacts:
    - id: dislocations
      name: Dislocations
      resultFile: dislocations.msgpack
      iterableKey: data
      exposure:
        canvas: true
        raster: true
      exportConfig:
        name: DislocationExporter
        type: glb
        opts:
            lineWidth: 0.8
            colorByType: true
            material:
                baseColor: [1.0, 0.5, 0.0, 1.0]
                metallic: 0.0
                roughness: 0.8
                emissive: [0.0, 0.0, 0.0]
    
    - id: structure-identification
      name: Structure Identification
      resultFile: atoms.msgpack
      exposure:
        canvas: true
        raster: true
      exportConfig:
        name: AtomisticExporter
        handler: exportAtomsTypeToGLBMinIO
        type: glb

    - id: defect-mesh
      name: Defect Mesh
      exposure:
        canvas: true
      resultFile: defect_mesh.msgpack
      exportConfig:
        name: MeshExporter
        type: glb
        opts:
            material:
                baseColor: [1.0, 1.0, 1.0, 1.0]
                metallic: 0.0
                roughness: 0.0
                emissive: [0.0, 0.0, 0.0]
            smoothIterations: 8
            generateNormals: true
            enableDoubleSided: true
    
    - id: interface-mesh
      name: Interface Mesh
      exposure:
        canvas: true
      resultFile: interface_mesh.msgpack
      exportConfig:
        name: MeshExporter
        type: glb
        opts:
            material:
                baseColor: [1.0, 1.0, 1.0, 1.0]
                metallic: 0.0
                roughness: 0.0
                emissive: [0.0, 0.0, 0.0]
            smoothIterations: 8
            generateNormals: true
            enableDoubleSided: true

    - id: simulation-cell
      name: Simulation Cell
      resultFile: simulation_cell.msgpack

    - id: structure-analysis
      name: Structure Analysis
      resultFile: structure_stats.msgpack

entrypoint:
    bin: opendxa
    arguments:
        crystalStructure: 
            type: enum
            default: BCC
            values:
                - FCC
                - BCC
                - SC
                - HCP
                - CUBIC_DIAMOND
                - HEX_DIAMOND
        identificationMode:
            type: enum
            default: PTM
            values:
                - CNA
                - PTM
                - DIAMOND
        maxTrialCircuitSize:
            type: number
            default: 14
        circuitStretchability:
            type: number
            default: 9.0

        rmsd:
            type: number
            default: 0.10

        defectSmoothingLevel:
            type: number
            default: 8

        lineSmoothingLevel:
            type: number
            default: 5

        linePointInterval:
            type: number
            default: 2.5

        onlyPerfectDislocations:
            type: boolean
            default: false

        markCoreAtoms:
            type: boolean
            default: false

        structureIdentificationOnly:
            type: boolean
            default: false